---
description: Guidelines for creating new Cursor rules
globs: []
alwaysApply: true
---

# Rule Creation Checklist

**Note:** This meta-rule is intentionally comprehensive since it guides creation of all other rules. The rules it generates should follow a lighter, more focused format.

When creating a new rule, include:

1. **File naming**: Use format `[###]-[rule-name].mdc` with 3-digit prefix for organization
2. **description**: One clear sentence explaining the rule's purpose
3. **globs**: Target specific file patterns (empty `[]` only for universal rules)
4. **alwaysApply**: Set `true` only for project-wide rules, default to `false`
5. **Title/Section**: Clear header describing what the rule enforces
6. **Instructions**: Direct, actionable bullet points
7. **Examples**: Show both ❌ wrong and ✅ correct patterns for complex cases

## Numbering Convention

Organize rules using 3-digit prefixes for clarity and scalability:

- **0XX**: Meta rules and system-wide conventions (e.g., `001-meta-rules.mdc`)
- **1XX**: Code documentation and style (e.g., `100-docstring-standards.mdc`)
- **5XX**: Database conventions (e.g., `500-database-patterns.mdc`)
- **6XX**: Logging, console output, and error handling (e.g., `600-logging-standards.mdc`)
- **7XX**: Testing conventions (e.g., `700-testing-standards.mdc`)
- **8XX**: Module organization patterns (e.g., `800-file-discovery-pattern.mdc`)
- **9XX**: Utilities and helpers (e.g., `900-file-utils.mdc`)

Leave gaps (e.g., 100, 110, 120) to allow inserting new rules without renumbering.

**Note:** Add new categories (e.g., `2XX` for CLI, `3XX` for domain modules) as rules are created. Update this section when patterns emerge.

## Structure Guidelines

- **Single focus**: One rule = one concern. Use globs to separate domains (e.g., database rules target `**/database/**/*.py`)
- **Action-oriented**: Use short, direct language: "Use X", "Always Y", "Avoid Z" — not "Consider" or "Maybe"
- **Concrete examples**: Prefer code snippets over prose descriptions

## Rule Types & Appropriate Length

Different rule types have different optimal lengths:

### Simple Rules (Target: 50-100 lines)
- Single concept or requirement
- One or two examples
- Quick reference for specific decision

Example: Rule 601 (Log Level Guidelines) - ~80 lines

### Pattern Rules (Target: 100-150 lines)
- Recurring development pattern
- At least one complete working example
- Shows common variations

Example: Rule 602 (Module Logging Patterns) - ~170 lines

### Template Rules (OK: 150-250 lines)
- Meant to be copied and adapted
- Multiple complete examples (2-3) showing variations
- All necessary imports and context
- **Exceeding 150 lines is fine** for copyable templates

Example: Rule 612 (CLI Command Pattern) - ~185 lines, 3 complete examples

### Infrastructure Rules (OK: 100-200 lines)
- Setup/configuration guidance
- Referenced once during setup
- Can include monitoring, troubleshooting

Example: Rule 600 (Logging Configuration) - ~150 lines with rotation merged

**Rule of thumb**: Value matters more than brevity. If a rule will be copied/pasted frequently, make it comprehensive.

## Example Guidelines

### Minimum Examples
- At least one ❌ Avoid / ✅ Prefer pair for non-trivial concepts
- Show complete working code with imports, not fragments

### Template/Pattern Rules
- Provide 2-3 complete examples showing variations:
  - Simple/common case
  - With optional parameters or flags
  - Edge case or complex scenario
- Number steps in examples for clarity (1. Generate ID, 2. Log start, etc.)

### Example Formats That Work
- **Decision trees**: For "when to do X vs Y" questions
- **Comparison tables**: For "what's the difference between X and Y"
- **Checklists**: For "did I remember everything" verification
- **Step-by-step**: For complex multi-step procedures

## Cross-Referencing Rules

Cross-references create a knowledge network, helping readers discover related content and understand dependencies.

### Two Types of References

Use two types to clarify what's essential vs optional:

**Required Reading** (Prerequisites):
Use when reader MUST understand another rule first to make sense of this one.

```markdown
## Required Reading
- **Rule 600**: Logging Configuration (this rule builds on logging concepts)
- **Rule 601**: Log Level Guidelines (must understand log levels first)
```

**See Also** (Discovery):
Use when another rule provides related examples, alternatives, or deeper dives.

```markdown
## See Also
- Rule 612: CLI Command Pattern (complete example using this concept)
- Rule 701: CLI Testing (how to test implementations of this pattern)
```

**When to use "Required Reading":**
- Reader won't understand your rule without reading theirs first
- Your rule builds directly on concepts from another rule
- You're using terminology or patterns defined elsewhere

**When to use "See Also":**
- Rule shows related example or use case
- Rule provides alternative approach
- Suggesting where to go next for deeper understanding

### Best Practices

**1. Provide Context** - Explain WHY the reference matters:
- ❌ "See Rule 612"
- ✅ "See Rule 612: CLI Command Pattern (shows complete implementation example)"

**2. Use Descriptive Labels** - Make it clear what reader will find:
- ❌ "For more info, see Rule 700"
- ✅ "**Rule 700**: Testing Standards (foundation for all testing patterns)"

**3. Minimize Overuse** - Too many references overwhelm readers:
- Link to 2-5 related rules, not 10+
- Provide brief summary in current rule when possible
- Only reference when it adds genuine value

**5. When to Duplicate vs Reference**:
- **Duplicate**: 2-5 line code snippet needed to understand this rule immediately
- **Reference**: Detailed explanation, complete examples, or extensive guidance already covered
- **Summary + Reference**: Brief 1-paragraph overview here, then "See Rule XXX for complete details"

### Verification

Before finalizing cross-references:
- [ ] "Required Reading" truly required (can't understand rule without it)?
- [ ] "See Also" provides genuine value (not just random related topics)?
- [ ] Context explains WHY reference matters?
- [ ] Not overwhelming reader with too many references (2-5 is good)?
- [ ] Descriptive labels make it clear what reader will find?

## DO

- Use specific terminology from the project domain
- Include rationale for non-obvious requirements
- Target specific directories/files with globs to avoid conflicts
- Show complete working examples for anything not immediately obvious
- Add cross-references to related rules
- Use decision trees/tables for complex decisions

## DON'T

- Duplicate syntax/style rules that Ruff already enforces
- Mix unrelated concerns (e.g., database + API patterns in one rule)
- Add vague suggestions without concrete guidance
- Create rules for one-off situations
- Add long background context or philosophy to rules (keep them focused and actionable)
- Show code fragments without imports or context

## Template Skeleton

```mdc
---
description: [What this rule enforces in one sentence]
globs:
  - "[path/to/files/**/*.ext]"
alwaysApply: false
---

# [Rule Name]

- [Direct, actionable instruction]
- [Another specific requirement]

## Examples

❌ **Avoid:**
```[language]
[code showing wrong pattern]
```

✅ **Prefer:**
```[language]
[code showing correct pattern]
```
```

## Verification (Self-Check After Creating Rule)

### Basic Checklist (All Rules)
- [ ] Filename follows `[###]-[rule-name].mdc` format with appropriate category number
- [ ] Description clearly states what the rule enforces in one sentence
- [ ] Globs appropriately target files (not too broad, not too narrow)
- [ ] All instructions are direct and actionable
- [ ] Examples show wrong vs right patterns (at least one if concept is non-trivial)
- [ ] Rule focuses on single concern
- [ ] Rule length appropriate for type (see "Rule Types" above)
- [ ] No overlap with existing rules in same glob scope
- [ ] Value provided justifies length

### Template/Pattern Rules (Additional Checks)
- [ ] At least one complete working example (not fragments)
- [ ] All necessary imports shown in examples
- [ ] Multiple examples show common variations (2-3 for templates)
- [ ] Examples can be copied and adapted directly
- [ ] Numbered steps or clear flow in complex examples

### Complex Rules (Consider Adding)
- [ ] Decision tree for "when to use X vs Y" questions
- [ ] Comparison table for "what's the difference" questions
- [ ] Quick reference or summary section
- [ ] Cross-references to related rules
- [ ] Checklist for verification

### Organization (Consider)
- [ ] Could this be merged with a related rule? (if infrastructure/setup)
- [ ] Should this reference another rule instead of duplicating?
- [ ] Are cross-references clear and helpful?